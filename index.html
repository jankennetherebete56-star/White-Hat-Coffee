<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>White Hat Coffee | Customer Portal</title>
    <style>
        :root {
            --brand-green: #0a2e2a; /* Deep Forest Green from your logo */
            --accent-teal: #144d47;
            --gold: #d4a373;
            --white: #ffffff;
            --glass: rgba(10, 46, 42, 0.7); /* Themed glass effect */
            --border: rgba(255, 255, 255, 0.15);
        }

        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.85)), 
                        url('https://scontent.fmnl9-3.fna.fbcdn.net/v/t39.30808-6/487315554_122118313466794371_607240084685958445_n.jpg?_nc_cat=100&_nc_cb=99be929b-ad57045b&ccb=1-7&_nc_sid=cc71e4&oh=00_Afn0I2HenqCS4cYsHfnB8eHwJvoTik8bvD_hH8sZ5RnGWQ&oe=695083F9');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: var(--white);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Floating Animation for Cards */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        header { padding: 20px; text-align: center; }
        .logo-img { 
            width: 100px; 
            height: 100px; 
            border-radius: 50%; 
            border: 3px solid var(--gold);
            box-shadow: 0 0 20px rgba(212, 163, 115, 0.3);
            margin-bottom: 10px;
        }
        .logo-box h1 { margin: 0; font-size: 1.4rem; letter-spacing: 4px; text-transform: uppercase; font-weight: 900; }
        .logo-box span { color: var(--gold); }

        .container { flex: 1; display: flex; justify-content: center; align-items: center; padding: 20px; }

        .card {
            background: var(--glass);
            backdrop-filter: blur(30px);
            border: 1px solid var(--border);
            border-radius: 30px;
            padding: 40px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.8);
            text-align: center;
            animation: float 6s ease-in-out infinite;
        }

        input, textarea {
            width: 100%; padding: 16px; margin-bottom: 20px;
            background: rgba(0,0,0,0.5); border: 1px solid var(--border);
            border-radius: 12px; color: white; box-sizing: border-box;
            font-size: 1rem; outline: none; transition: 0.3s;
        }
        input:focus { border-color: var(--gold); box-shadow: 0 0 10px rgba(212, 163, 115, 0.2); }

        .rating-row { display: flex; justify-content: center; gap: 15px; margin-bottom: 25px; }
        .bean {
            font-size: 2.2rem; cursor: pointer; filter: grayscale(1); 
            opacity: 0.3; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .bean.active { filter: grayscale(0); opacity: 1; transform: scale(1.3); text-shadow: 0 0 15px var(--gold); }

        .btn {
            width: 100%; padding: 16px; 
            background: linear-gradient(135deg, var(--gold), #b3865a);
            border: none; border-radius: 12px; color: #000;
            font-weight: 800; cursor: pointer; transition: 0.4s;
            text-transform: uppercase; letter-spacing: 1px;
        }
        .btn:hover { transform: scale(1.02); filter: brightness(1.1); }
        .btn:disabled { background: #333; color: #666; cursor: not-allowed; transform: none; }

        /* Animation Pulse */
        @keyframes pulse-bean {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.4); opacity: 0.6; }
            100% { transform: scale(1); opacity: 1; }
        }
        .loading-bean { display: none; animation: pulse-bean 0.8s infinite; font-size: 1.5rem; }

        /* Thank You View */
        #thank-you-view { display: none; }
        .success-circle { 
            width: 80px; height: 80px; border: 4px solid var(--gold); 
            border-radius: 50%; display: flex; align-items: center; 
            justify-content: center; font-size: 3rem; color: var(--gold);
            margin: 0 auto 20px; 
            animation: pop-in 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes pop-in { 0% { transform: scale(0); } 100% { transform: scale(1); } }

        /* Admin Layout */
        .admin-box { max-width: 850px; animation: none; }
        .stat-card { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 15px; flex: 1; }
        .stat-card h3 { color: var(--gold); margin: 5px 0 0; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { color: var(--gold); text-align: left; padding: 12px; font-size: 0.8rem; border-bottom: 1px solid var(--border); }
        td { padding: 12px; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 0.9rem; }

        .hidden { display: none; }
    </style>
</head>
<body>

<header>
    <div class="logo-box">
        <img src="https://scontent.fmnl9-2.fna.fbcdn.net/v/t39.30808-6/536275766_122156552030794371_4811627826598428867_n.jpg?_nc_cat=101&_nc_cb=99be929b-ad57045b&ccb=1-7&_nc_sid=6ee11a&oh=00_AfnoNILrgFFehV4i4OgTdgpndVk3VgCQYqGc4t7nv74YZg&oe=6950720D" alt="White Hat Coffee" class="logo-img">
        <h1>White<span>Hat</span> Coffee</h1>
    </div>
</header>

<div class="container">
    
    <div id="login-card" class="card">
        <h2 style="font-weight: 300;">Member <strong>Login</strong></h2>
        <input type="text" id="userName" placeholder="What's your name?">
        <button class="btn" onclick="app.login()">Enter Portal</button>
    </div>

    <div id="feedback-card" class="card hidden">
        <h2 style="margin:0">Rate the Brew</h2>
        <p style="opacity: 0.5; margin-bottom: 25px; font-size: 0.9rem;">Mandatory quality review</p>
        
        <div class="rating-row">
            <span class="bean" onclick="app.setRating(1)">☕</span>
            <span class="bean" onclick="app.setRating(2)">☕</span>
            <span class="bean" onclick="app.setRating(3)">☕</span>
            <span class="bean" onclick="app.setRating(4)">☕</span>
            <span class="bean" onclick="app.setRating(5)">☕</span>
        </div>

        <textarea id="userComment" rows="4" placeholder="How was your experience today?" oninput="app.validate()"></textarea>
        
        <button class="btn" id="submitBtn" onclick="app.submit()" disabled>
            <span id="btnText">Submit Feedback</span>
            <span id="btnLoading" class="loading-bean">☕</span>
        </button>
    </div>

    <div id="thank-you-view" class="card">
        <div class="success-circle">✓</div>
        <h2 style="margin:0">Thank You!</h2>
        <p id="thanks-name" style="color: var(--gold); font-weight: bold; margin: 10px 0;"></p>
        <p style="opacity: 0.6; font-size: 0.9rem;">Your response has been logged successfully.</p>
        <button class="btn" style="margin-top: 25px; background: transparent; border: 1px solid var(--gold); color: var(--gold);" onclick="location.reload()">Return Home</button>
    </div>

    <div id="admin-card" class="card admin-box hidden">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
            <h2 style="margin:0">Executive Logs</h2>
            <button onclick="location.reload()" style="background:none; border:1px solid var(--gold); color:var(--gold); border-radius:8px; padding:5px 15px; cursor:pointer;">Logout</button>
        </div>

        <div style="display:flex; gap: 15px; margin-bottom: 20px;">
            <div class="stat-card"><p>Total Logs</p><h3 id="stat-total">0</h3></div>
            <div class="stat-card"><p>Avg Score</p><h3 id="stat-avg">0.0</h3></div>
        </div>

        <div style="max-height: 250px; overflow-y: auto; background: rgba(0,0,0,0.3); border-radius: 15px;">
            <table>
                <thead>
                    <tr><th>Name</th><th>Rating</th><th>Comment</th><th>Time</th></tr>
                </thead>
                <tbody id="log-table"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
    const app = {
        rating: 0,
        user: "",
        logs: JSON.parse(sessionStorage.getItem('whc_logs')) || [],

        login: function() {
            this.user = document.getElementById('userName').value.trim();
            if(!this.user) return alert("Enter your name to continue.");

            document.getElementById('login-card').classList.add('hidden');

            if(this.user === 'GwynWhiteHatAdmin') {
                this.showAdmin();
            } else {
                document.getElementById('feedback-card').classList.remove('hidden');
            }
        },

        setRating: function(val) {
            this.rating = val;
            document.querySelectorAll('.bean').forEach((b, i) => {
                b.classList.toggle('active', i < val);
            });
            this.validate();
        },

        validate: function() {
            const comment = document.getElementById('userComment').value.trim();
            document.getElementById('submitBtn').disabled = !(this.rating > 0 && comment.length >= 5);
        },

        submit: function() {
            document.getElementById('btnText').style.display = 'none';
            document.getElementById('btnLoading').style.display = 'inline-block';
            document.getElementById('submitBtn').disabled = true;

            const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

            setTimeout(() => {
                this.logs.push({ 
                    user: this.user, 
                    rating: this.rating, 
                    comment: document.getElementById('userComment').value.trim(),
                    time: time
                });
                sessionStorage.setItem('whc_logs', JSON.stringify(this.logs));
                
                document.getElementById('feedback-card').classList.add('hidden');
                document.getElementById('thank-you-view').style.display = 'block';
                document.getElementById('thanks-name').innerText = "Cheers, " + this.user + "!";
            }, 2000);
        },

        showAdmin: function() {
            document.getElementById('admin-card').classList.remove('hidden');
            const table = document.getElementById('log-table');
            const total = this.logs.length;
            let sum = 0;

            document.getElementById('stat-total').innerText = total;
            table.innerHTML = "";

            if(total === 0) {
                table.innerHTML = "<tr><td colspan='4' style='text-align:center; padding:30px; opacity:0.5;'>No submissions yet.</td></tr>";
            } else {
                [...this.logs].reverse().forEach(log => {
                    sum += log.rating;
                    table.innerHTML += `<tr>
                        <td style="color:var(--gold); font-weight:bold;">${log.user}</td>
                        <td>${"☕".repeat(log.rating)}</td>
                        <td style="opacity:0.8">${log.comment}</td>
                        <td style="font-size: 0.75rem; opacity: 0.4;">${log.time}</td>
                    </tr>`;
                });
                document.getElementById('stat-avg').innerText = (sum / total).toFixed(1);
            }
        }
    };
</script>
</body>
</html>